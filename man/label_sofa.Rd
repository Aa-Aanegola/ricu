% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/label-sofa.R
\name{sofa_score}
\alias{sofa_score}
\alias{sofa_pafi}
\alias{sofa_vent}
\alias{sofa_gcs}
\alias{sofa_urine}
\alias{sofa_window}
\alias{sofa_compute}
\title{SOFA score label}
\usage{
sofa_score(
  pa_fi,
  vent_ind,
  platelet_count,
  bilirubin_total,
  map,
  norepinephrine,
  epinephrine,
  dopamine,
  dobutamine,
  gcs,
  creatinine,
  urine_24,
  ...,
  interval = ricu::interval(pa_fi)
)

sofa_pafi(
  pa_o2,
  fi_o2,
  win_length = hours(2L),
  mode = c("match_vals", "extreme_vals", "fill_gaps"),
  fix_na_fio2 = TRUE,
  interval = ricu::interval(pa_o2)
)

sofa_vent(
  vent_start,
  vent_end,
  win_length = hours(6L),
  min_length = mins(10L),
  interval = ricu::interval(vent_start)
)

sofa_gcs(
  gcs_eye,
  gcs_motor,
  gcs_verbal,
  gcs_total,
  tracheostomy,
  rass_scale,
  win_length = hours(6L),
  set_sed_max = TRUE,
  set_na_max = TRUE,
  interval = ricu::interval(gcs_eye)
)

sofa_urine(
  urine_out,
  min_win = hours(12L),
  interval = ricu::interval(urine_out)
)

sofa_window(
  tbl,
  pafi_win_fun = min_or_na,
  coag_win_fun = min_or_na,
  bili_win_fun = max_or_na,
  map_win_fun = min_or_na,
  dopa_win_fun = max_or_na,
  norepi_win_fun = max_or_na,
  dobu_win_fun = max_or_na,
  epi_win_fun = max_or_na,
  gcs_win_fun = min_or_na,
  crea_win_fun = max_or_na,
  urine_win_fun = min_or_na,
  explicit_wins = FALSE,
  worst_win_length = hours(24L)
)

sofa_compute(
  tbl,
  na_val = 0L,
  na_val_resp = na_val,
  na_val_coag = na_val,
  na_val_liver = na_val,
  na_val_cardio = na_val,
  na_val_cns = na_val,
  na_val_renal = na_val,
  impute_fun = NULL,
  by_ref = FALSE
)
}
\arguments{
\item{pa_fi, vent_ind, platelet_count, bilirubin_total, map, norepinephrine, epinephrine, dopamine, dobutamine, gcs, creatinine, urine_24}{Data input used for
sofa score evaluation (\code{ts_tbl} objects, as produced by \code{\link[=load_concepts]{load_concepts()}})}

\item{...}{Passed to \code{sofa_window()} or \code{sofa_compute()}}

\item{interval}{Time series interval (only used for checking consistency
of input data)}

\item{pa_o2, fi_o2}{Data input used for pafi evaluation}

\item{win_length}{Maximal time window for which a GCS value is valid
if no newer measurement is available}

\item{mode}{Method for matching PaO2 and FiO2 values}

\item{fix_na_fio2}{Logical flag indicating whether to impute missing FiO2
values with 21}

\item{vent_start, vent_end}{Data input used for vent evaluation}

\item{min_length}{Minimal time span between a ventilation start and end
time}

\item{gcs_eye, gcs_motor, gcs_verbal, gcs_total, tracheostomy, rass_scale}{Data
input used for gcs evaluation}

\item{set_sed_max}{Logical flag for considering sedation}

\item{set_na_max}{Logical flag controlling imputation of missing GCS values
with the respective maximum values}

\item{urine_out}{Data input used for urine/24h evaluation}

\item{min_win}{Minimal time span required for calculation of urine/24h}

\item{tbl}{Table holding SOFA covariates}

\item{pafi_win_fun, coag_win_fun, bili_win_fun, map_win_fun, dopa_win_fun, norepi_win_fun, dobu_win_fun, epi_win_fun, gcs_win_fun, crea_win_fun, urine_win_fun}{functions used to calculate worst values over windows}

\item{explicit_wins}{The default \code{FALSE} iterates over all time steps,
\code{TRUE} uses only the last time step per patient and a vector of times will
iterate over these explicit time points}

\item{worst_win_length}{Time-frame to look back and apply the \verb{*_win_fun}s}

\item{na_val}{Value to use for missing data}

\item{na_val_resp, na_val_coag, na_val_liver, na_val_cardio, na_val_cns, na_val_renal}{Feature-specific values to use in case of missing data; default is \code{na_val}}

\item{impute_fun}{Function used to impute missing data; default is NULL}

\item{by_ref}{Logical flag indicating whether to perform the operation by
reference}
}
\description{
The SOFA (Sequential Organ Failure Assessment) score is a commonly used
assessment tool used to track a patient's well-being in an ICU.
}
\details{
The SOFA score (\href{https://www.researchgate.net/profile/Rui_Moreno/publication/14361654_The_SOFA_Sepsis-related_Organ_Failure_Assessment_score_to_describe_organ_dysfunctionfailure_On_behalf_of_the_Working_Group_on_Sepsis-Related_Problems_of_the_European_Society_of_Intensive_Care_Medicine/links/0c960536cf4f20aef4000000.pdf}{Vincent et. al.}) is evaluated as follows:

\figure{SOFA_table.png}

For each component, the worst value over a window of length \code{worst_win_length} (default \code{hours(24L)}) is taken.

The respiratory component of the SOFA score requires the evaluation of the PaO2/FiO2 ratio. Often, however, both measures are not available at the same time point. Therefore, PaO2 and FiO2 measurements are matched within a window of size \code{pafi_win_length} (default \code{hours(2L)}).

The renal component of the SOFA score assigns scores of 3 and 4 in case of a very low urine output. Since the information on urine output is not very reliable at the start of the ICU stay, we do not evaluate urine outputs before a time window of \code{urine_min_win} (default \code{hours(12L)}).

Mechanical ventilation is also part of the SOFA score. In some datasets, ventilation start events are given, which cannot be matched to ventilation end events specifically. In these cases, the duration of the ventilation window is taken to be \code{vent_win_length} (default \code{hours(6L)}).
}
